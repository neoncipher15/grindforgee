<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GrindForge Pomodoro</title>
<link rel="icon" href="/GrindForge.png">

<style>
:root{
--accent:#4ecdc4;
--danger:#ff5a5a;
--card:rgba(5,8,15,.9);
--text:#eaffff;
--radius:16px;
}
*{box-sizing:border-box}

body{
margin:0;
font-family:Poppins,system-ui;
background:#05080f;
color:var(--text);
}

.overlay{
position:fixed;
inset:0;
background:rgba(0,0,0,.45);
z-index:-1;
}

#stars{
position:fixed;
inset:0;
z-index:-2;
pointer-events:none;
}

.container{
max-width:1200px;
margin:auto;
padding:16px;
display:grid;
grid-template-columns:1fr 1fr;
grid-template-rows:auto 1fr;
gap:16px;
min-height:100vh;
}

header{
grid-column:1/3;
display:flex;
justify-content:space-between;
align-items:center;
padding:18px 24px;
background:var(--card);
border-radius:var(--radius);
}

.brand{
display:flex;
gap:12px;
align-items:center;
}

.brand img{width:42px}

.card{
background:var(--card);
border-radius:var(--radius);
padding:20px;
}

/* TIMER */
.timer-box{
display:flex;
flex-direction:column;
align-items:center;
gap:12px;
}

svg{width:240px;height:240px}

#timerText{font-size:32px;font-weight:900;fill:#4ecdc4}
#modeText{font-size:14px;fill:#9adbd4;letter-spacing:2px}

.controls button{
padding:10px 18px;
margin:4px;
border:0;
border-radius:12px;
font-weight:700;
cursor:pointer;
background:linear-gradient(135deg,#4ecdc4,#6ef0c9);
}

.settings{display:flex;gap:10px;margin-top:8px}
.settings input{
width:70px;
padding:8px;
border-radius:8px;
border:0;
background:rgba(255,255,255,.1);
color:white;
text-align:center;
}

/* TODO */
.todo-input{
display:flex;
gap:10px;
margin-bottom:12px;
}

.todo-input input{
flex:1;
padding:12px;
border-radius:10px;
border:0;
background:rgba(255,255,255,.1);
color:white;
}

.todo-input button{
padding:12px 16px;
border-radius:10px;
border:0;
font-weight:700;
background:linear-gradient(135deg,#4ecdc4,#6ef0c9);
cursor:pointer;
}

li{
list-style:none;
display:flex;
align-items:center;
gap:10px;
padding:12px;
margin-bottom:8px;
border-radius:10px;
background:rgba(255,255,255,.08);
}

.checkbox{
width:26px;
height:26px;
border-radius:8px;
border:2px solid #aaa;
display:flex;
align-items:center;
justify-content:center;
cursor:pointer;
}

.checkbox.done{
background:#6ef0c9;
border-color:#6ef0c9;
color:#042726;
}

.desc{flex:1}
.desc.done{text-decoration:line-through;opacity:.6}

.delete{
cursor:pointer;
font-size:18px;
color:#ff5a5a;
transition:.2s;
}
.delete:hover{transform:scale(1.2)}
</style>
</head>

<body>
<canvas id="stars"></canvas>
<div class="overlay"></div>

<div class="container">

<header>
<div class="brand">
<img src="/GrindForge.png">
<h2>GrindForge</h2>
</div>
<div id="date"></div>
</header>

<section class="card timer-box">
<svg viewBox="0 0 200 200">
<circle cx="100" cy="100" r="90" stroke="#233" stroke-width="12" fill="none"/>
<circle id="progress" cx="100" cy="100" r="90"
stroke="#4ecdc4" stroke-width="12" fill="none"
stroke-dasharray="565"
transform="rotate(-90 100 100)"/>

<text id="modeText" x="100" y="85" text-anchor="middle">WORK</text>
<text id="timerText" x="100" y="115" text-anchor="middle">25:00</text>
</svg>

<div class="controls">
<button id="startBtn">Start</button>
<button id="pauseBtn">Pause</button>
<button id="resetBtn">Reset</button>
</div>

<div class="settings">
<label>Work <input id="workTime" value="25"></label>
<label>Break <input id="breakTime" value="5"></label>
</div>
</section>

<section class="card">
<h3>üìù To-Do</h3>
<div class="todo-input">
<input id="todoInput" placeholder="Type your task‚Ä¶">
<button id="addTask">Add</button>
</div>
<ul id="todoList"></ul>
</section>

</div>

<audio id="alarm" src="alarm.mp3"></audio>
<audio id="ting" src="ting.mp3"></audio>

<script>
class Pomodoro{
constructor(){
this.work=true;
this.running=false;
this.time=25*60;
this.total=this.time;

this.progress=document.getElementById("progress");
this.timerText=document.getElementById("timerText");
this.modeText=document.getElementById("modeText");

this.startBtn=startBtn;
this.pauseBtn=pauseBtn;
this.resetBtn=resetBtn;

this.workInput=workTime;
this.breakInput=breakTime;

this.todoInput=todoInput;
this.todoList=todoList;
this.addBtn=addTask;

this.tasks=JSON.parse(localStorage.getItem("tasks")||"[]");

this.bind();
this.render();
this.renderTodos();
this.updateDate();
}

bind(){
this.startBtn.onclick=()=>this.start();
this.pauseBtn.onclick=()=>this.pause();
this.resetBtn.onclick=()=>this.reset();

this.addBtn.onclick=()=>this.addTask();
this.todoInput.onkeydown=e=>{
if(e.key==="Enter")this.addTask();
};
}

start(){
if(this.running)return;
this.running=true;
this.interval=setInterval(()=>{
if(this.time<=0){this.complete();return;}
this.time--;
this.render();
},1000);
}

pause(){clearInterval(this.interval);this.running=false}

reset(){
this.pause();
this.work=true;
this.time=this.workInput.value*60;
this.total=this.time;
this.render();
}

complete(){
this.pause();
alarm.play();
this.work=!this.work;
this.time=(this.work?this.workInput.value:this.breakInput.value)*60;
this.total=this.time;
this.render();
}

render(){
const m=String(Math.floor(this.time/60)).padStart(2,"0");
const s=String(this.time%60).padStart(2,"0");
this.timerText.textContent=`${m}:${s}`;
this.modeText.textContent=this.work?"WORK":"BREAK";
this.progress.style.strokeDashoffset=565-(this.time/this.total)*565;
this.progress.style.stroke=this.work?"#4ecdc4":"#ff5a5a";
}

addTask(){
const t=this.todoInput.value.trim();
if(!t)return;
this.tasks.push({id:Date.now(),text:t,done:false});
this.todoInput.value="";
this.save();
this.renderTodos();
}

renderTodos(){
this.todoList.innerHTML="";
this.tasks.forEach((task,i)=>{
const li=document.createElement("li");

const cb=document.createElement("div");
cb.className="checkbox"+(task.done?" done":"");
cb.textContent=task.done?"‚úì":"";
cb.onclick=()=>{
task.done=!task.done;
ting.play();
this.save();
this.renderTodos();
};

const span=document.createElement("span");
span.className="desc"+(task.done?" done":"");
span.textContent=task.text;

const del=document.createElement("span");
del.className="delete";
del.textContent="‚úï";
del.onclick=()=>{
this.tasks.splice(i,1);
this.save();
this.renderTodos();
};

li.append(cb,span,del);
this.todoList.appendChild(li);
});
}

save(){
localStorage.setItem("tasks",JSON.stringify(this.tasks));
}

updateDate(){
const d=document.getElementById("date");
setInterval(()=>{
d.textContent=new Date().toLocaleString("en-IN",{
weekday:"long",day:"numeric",month:"short",
year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false
});
},1000);
}
}

/* STARS */
const canvas=stars,ctx=canvas.getContext("2d");
let S=[];
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
resize();addEventListener("resize",resize);
for(let i=0;i<120;i++)S.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,r:Math.random()+.3,s:Math.random()*.2+.05});
(function anim(){
ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.fillStyle="rgba(255,255,255,.8)";
S.forEach(st=>{
st.y+=st.s;
if(st.y>canvas.height){st.y=0;st.x=Math.random()*canvas.width}
ctx.beginPath();ctx.arc(st.x,st.y,st.r,0,Math.PI*2);ctx.fill();
});
requestAnimationFrame(anim);
})();

new Pomodoro();
</script>
</body>
</html>
