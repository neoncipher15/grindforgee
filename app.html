<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GrindForge</title>

<style>
/* ================= ROOT ================= */
:root{
  --bg:#020617;
  --card:#0b1224;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --accent:#38bdf8;
}

/* ================= RESET ================= */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:system-ui, sans-serif;
}
body{
  background:var(--bg);
  color:var(--text);
  min-height:100vh;
  overflow:hidden;
}

/* ================= STARS ================= */
#stars{
  position:fixed;
  inset:0;
  z-index:-1;
}

/* ================= LAYOUT ================= */
.container{
  max-width:1100px;
  margin:auto;
  padding:20px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:20px;
}

.card{
  background:rgba(11,18,36,.85);
  border:1px solid rgba(255,255,255,.08);
  border-radius:16px;
  padding:20px;
  backdrop-filter:blur(10px);
}

/* ================= HEADER ================= */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}
#clock{
  font-size:1.2rem;
  color:var(--accent);
}

/* ================= POMODORO ================= */
.timer{
  font-size:3rem;
  text-align:center;
  margin:20px 0;
}
.controls{
  display:flex;
  gap:10px;
  justify-content:center;
}
button{
  background:#020617;
  color:white;
  border:1px solid rgba(255,255,255,.1);
  padding:10px 14px;
  border-radius:10px;
  cursor:pointer;
}
button:hover{background:#020b1f}

/* ================= TODO ================= */
.todo input{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:none;
  margin-bottom:10px;
}
.todo button{
  width:100%;
  margin-bottom:10px;
}
ul{
  list-style:none;
}
li{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:8px;
}
.check{
  width:18px;
  height:18px;
  border-radius:50%;
  border:2px solid var(--accent);
  cursor:pointer;
}
.check.done{
  background:var(--accent);
}
.del{
  margin-left:auto;
  cursor:pointer;
  color:#f87171;
}

/* ================= SUMMARY ================= */
#summary{
  position:fixed;
  inset:0;
  background:rgba(2,6,23,.9);
  display:none;
  align-items:center;
  justify-content:center;
}
#summary.active{
  display:flex;
}
.summary-box{
  background:var(--card);
  padding:30px;
  border-radius:16px;
  text-align:center;
}
</style>
</head>

<body>

<canvas id="stars"></canvas>

<header class="container">
  <h2>GrindForge</h2>
  <div id="clock"></div>
</header>

<main class="container">

  <!-- Pomodoro -->
  <div class="card">
    <h3>Pomodoro</h3>
    <div id="time" class="timer">25:00</div>
    <div class="controls">
      <button id="start">Start</button>
      <button id="pause">Pause</button>
      <button id="reset">Reset</button>
    </div>
  </div>

  <!-- Todo -->
  <div class="card todo">
    <h3>To-Do</h3>
    <input id="taskInput" placeholder="Add task">
    <button id="addTask">Add Task</button>
    <ul id="tasks"></ul>
  </div>

  <!-- End day -->
  <div class="card">
    <h3>Day Summary</h3>
    <button id="endDay">End Day</button>
  </div>

</main>

<!-- SUMMARY POPUP -->
<div id="summary">
  <div class="summary-box">
    <h2>Good Job üëë</h2>
    <p id="focusStat"></p>
    <p id="taskStat"></p>
  </div>
</div>

<script>
/* ================= CLOCK ================= */
const clock=document.getElementById("clock");
function clockUpdate(){
  clock.textContent=new Date().toLocaleTimeString("en-IN",
  {hour:"numeric",minute:"2-digit",hour12:true});
}
clockUpdate();
setInterval(clockUpdate,60000);

/* ================= STARS ================= */
const canvas=document.getElementById("stars");
const ctx=canvas.getContext("2d");

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
resize();
addEventListener("resize",resize);

const stars=Array.from({length:180},()=>({
  x:Math.random()*canvas.width,
  y:Math.random()*canvas.height,
  r:Math.random()*1.5,
  s:Math.random()*0.4+0.1
}));

function animateStars(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="white";
  stars.forEach(star=>{
    star.y+=star.s;
    if(star.y>canvas.height){
      star.y=0;
      star.x=Math.random()*canvas.width;
    }
    ctx.beginPath();
    ctx.arc(star.x,star.y,star.r,0,Math.PI*2);
    ctx.fill();
  });
  requestAnimationFrame(animateStars);
}
animateStars();

/* ================= SOUND ================= */
function beep(){
  const audio=new AudioContext();
  const osc=audio.createOscillator();
  osc.frequency.value=900;
  osc.connect(audio.destination);
  osc.start();
  setTimeout(()=>{osc.stop();audio.close()},300);
}

/* ================= POMODORO ================= */
const startBtn=document.getElementById("start");
const pauseBtn=document.getElementById("pause");
const resetBtn=document.getElementById("reset");
const timeEl=document.getElementById("time");

let total=1500;
let time=total;
let running=false;
let timer=null;
let focusSeconds=0;

function render(){
  timeEl.textContent=
    String(Math.floor(time/60)).padStart(2,"0")+":"+
    String(time%60).padStart(2,"0");
}
render();

startBtn.onclick=()=>{
  if(running)return;
  running=true;
  timer=setInterval(()=>{
    time--;
    focusSeconds++;
    if(time<=0){
      clearInterval(timer);
      running=false;
      beep();
    }
    render();
  },1000);
};

pauseBtn.onclick=()=>{
  clearInterval(timer);
  running=false;
};

resetBtn.onclick=()=>{
  clearInterval(timer);
  running=false;
  time=total;
  render();
};

/* ================= TODO ================= */
const taskInput=document.getElementById("taskInput");
const addTaskBtn=document.getElementById("addTask");
const tasks=document.getElementById("tasks");

let completed=0;

addTaskBtn.onclick=()=>{
  if(!taskInput.value.trim())return;

  const li=document.createElement("li");
  const check=document.createElement("div");
  check.className="check";
  check.onclick=()=>{
    if(!check.classList.contains("done")) completed++;
    check.classList.toggle("done");
  };

  const text=document.createElement("span");
  text.textContent=taskInput.value;

  const del=document.createElement("span");
  del.className="del";
  del.textContent="‚úï";
  del.onclick=()=>li.remove();

  li.append(check,text,del);
  tasks.appendChild(li);
  taskInput.value="";
};

/* ================= END DAY ================= */
const endDay=document.getElementById("endDay");
const summary=document.getElementById("summary");
const focusStat=document.getElementById("focusStat");
const taskStat=document.getElementById("taskStat");

endDay.onclick=()=>{
  focusStat.textContent=`‚è± Focused: ${Math.floor(focusSeconds/60)} min`;
  taskStat.textContent=`‚úÖ Tasks done: ${completed}`;
  summary.classList.add("active");
};
</script>

</body>
</html>
