<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GrindForge</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
/* ================= RESET ================= */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}

/* ================= WINDOWS 11 STYLE ================= */
:root{
  --bg:#0b0e14;
  --mica:rgba(255,255,255,.08);
  --mica-soft:rgba(255,255,255,.04);
  --border:rgba(255,255,255,.18);
  --text:#f3f4f6;
  --muted:#a1a1aa;
  --accent:#4f7cff;
  --radius:14px;
}

body{
  font-family:Inter,system-ui,sans-serif;
  background:
    radial-gradient(800px 500px at 10% -10%, #1b2a4a, transparent 60%),
    radial-gradient(700px 400px at 90% 10%, #1f1b3a, transparent 55%),
    linear-gradient(180deg,#0b0e14,#0b0e14);
  color:var(--text);
}

/* ================= LAYOUT ================= */
header{
  padding:18px 24px;
  border-bottom:1px solid var(--border);
  backdrop-filter:blur(18px);
}
header h1{
  font-size:1.3rem;
  font-weight:800;
}

main{
  max-width:1200px;
  margin:auto;
  padding:32px 24px 56px;
  display:grid;
  grid-template-columns:1.2fr 1fr;
  gap:32px;
}
@media(max-width:900px){
  main{grid-template-columns:1fr}
}

/* ================= PANELS ================= */
.panel{
  background:linear-gradient(180deg,var(--mica),var(--mica-soft));
  backdrop-filter:blur(18px);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:22px;
}

/* ================= TIMER ================= */
.timer{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:24px;
}
.ring{
  width:260px;
  height:260px;
  border-radius:50%;
  background:conic-gradient(var(--accent) var(--deg,0deg), rgba(255,255,255,.15) 0deg);
  display:flex;
  align-items:center;
  justify-content:center;
}
.core{
  width:200px;
  height:200px;
  border-radius:50%;
  background:rgba(10,12,18,.8);
  border:1px solid var(--border);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}
.time{
  font-size:3rem;
  font-weight:800;
}
.phase{
  font-size:.75rem;
  letter-spacing:.2em;
  color:var(--muted);
}

.controls{
  display:flex;
  gap:12px;
}
button{
  padding:12px 20px;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--mica-soft);
  color:var(--text);
  font-weight:600;
  cursor:pointer;
}
button.primary{
  background:linear-gradient(135deg,#4f7cff,#3b64ff);
  border:none;
}

/* ================= INPUTS ================= */
input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--mica-soft);
  color:var(--text);
}
input::placeholder{color:var(--muted)}

/* ================= SETTINGS ================= */
.settings{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
label{
  font-size:.75rem;
  color:var(--muted);
}

/* ================= TASKS ================= */
.tasks{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-top:14px;
}
.task{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px;
  border-radius:12px;
  background:var(--mica-soft);
  border:1px solid var(--border);
}
.task.done{
  opacity:.5;
  text-decoration:line-through;
}
.task span{
  flex:1;
}
.task button{
  background:none;
  border:none;
  color:#ef4444;
  font-size:1.1rem;
}

/* ================= AUDIO ================= */
audio{display:none}
</style>
</head>

<body>

<audio id="alarm">
  <source src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg">
</audio>

<header>
  <h1>GrindForge</h1>
</header>

<main>

<!-- TIMER PANEL -->
<section class="panel timer">
  <div class="ring" id="ring">
    <div class="core">
      <div class="time" id="time">25:00</div>
      <div class="phase" id="phase">WORK</div>
    </div>
  </div>
  <div class="controls">
    <button class="primary" id="start">Start</button>
    <button id="pause">Pause</button>
    <button id="reset">Reset</button>
  </div>
</section>

<!-- SIDEBAR -->
<section style="display:flex;flex-direction:column;gap:24px">

<!-- SETTINGS -->
<div class="panel">
  <h3>Quick Settings</h3><br>
  <div class="settings">
    <div>
      <label>Work (min)</label>
      <input id="work" type="number" value="25">
    </div>
    <div>
      <label>Break (min)</label>
      <input id="break" type="number" value="5">
    </div>
  </div>
</div>

<!-- TASKS -->
<div class="panel">
  <h3>Tasks</h3><br>
  <input id="taskInput" placeholder="Type task and press Enter">
  <div class="tasks" id="tasks"></div>
</div>

</section>
</main>

<script>
/* ================= TIMER LOGIC (WORKING) ================= */
let mode="work";
let total=1500;
let time=1500;
let interval=null;

const timeEl=document.getElementById("time");
const phaseEl=document.getElementById("phase");
const ring=document.getElementById("ring");
const alarm=document.getElementById("alarm");

function render(){
  timeEl.textContent=
    Math.floor(time/60)+":"+String(time%60).padStart(2,"0");
  ring.style.setProperty("--deg",360*(1-time/total)+"deg");
}

function load(){
  total=(mode==="work"?work.value:break.value)*60;
  time=total;
  phaseEl.textContent=mode.toUpperCase();
  render();
}

function start(){
  if(interval) return;
  interval=setInterval(()=>{
    time--;
    render();
    if(time<=0){
      clearInterval(interval);
      interval=null;
      alarm.play();
      mode=mode==="work"?"break":"work";
      load();
    }
  },1000);
}

function pause(){
  clearInterval(interval);
  interval=null;
}

function reset(){
  pause();
  load();
}

start.onclick=start;
pause.onclick=pause;
reset.onclick=reset;
work.onchange=load;
break.onchange=load;
load();

/* ================= TASK SYSTEM (WORKING) ================= */
let tasks=JSON.parse(localStorage.getItem("tasks")||"[]");
const list=document.getElementById("tasks");

function save(){localStorage.setItem("tasks",JSON.stringify(tasks));}

function draw(){
  list.innerHTML="";
  tasks.forEach((t,i)=>{
    const d=document.createElement("div");
    d.className="task"+(t.done?" done":"");

    const c=document.createElement("input");
    c.type="checkbox";
    c.checked=t.done;
    c.onchange=()=>{t.done=!t.done;save();draw();};

    const s=document.createElement("span");
    s.contentEditable=true;
    s.textContent=t.text;
    s.oninput=e=>{t.text=e.target.textContent;save();};

    const x=document.createElement("button");
    x.textContent="âœ•";
    x.onclick=()=>{tasks.splice(i,1);save();draw();};

    d.append(c,s,x);
    list.append(d);
  });
}

taskInput.onkeydown=e=>{
  if(e.key==="Enter" && taskInput.value.trim()){
    tasks.push({text:taskInput.value,done:false});
    taskInput.value="";
    save();
    draw();
  }
};

draw();
</script>

</body>
</html>
